const header=document.querySelector('.header');const onScroll=()=>requestAnimationFrame(()=>{if(window.scrollY>10)header?.classList.add('scrolled');else header?.classList.remove('scrolled')});window.addEventListener('scroll',onScroll);onScroll();
const navToggle=document.querySelector('#nav-toggle');const navMenu=document.querySelector('#nav-menu');navToggle?.addEventListener('click',()=>{const e="true"===navToggle.getAttribute("aria-expanded");navToggle.setAttribute("aria-expanded",String(!e));navMenu?.classList.toggle("open")});
const prefersReduced=window.matchMedia('(prefers-reduced-motion: reduce)').matches;document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener('click',e=>{const id=a.getAttribute('href')?.slice(1);const el=id&&document.getElementById(id);if(el){e.preventDefault();el.scrollIntoView({behavior:prefersReduced?'auto':'smooth',block:'start'});el.focus({preventScroll:true});}})});
(()=>{const canvas=document.getElementById('hero-canvas');if(!canvas)return;const ctx=canvas.getContext('2d');let w,h,pts=[];const NUM=70,MAX=140;function R(){w=canvas.width=canvas.offsetWidth;h=canvas.height=canvas.offsetHeight;pts=[];for(let i=0;i<NUM;i++)pts.push({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-.5)*.6,vy:(Math.random()-.5)*.6});}function D(){ctx.clearRect(0,0,w,h);for(let i=0;i<NUM;i++)for(let j=i+1;j<NUM;j++){const a=pts[i],b=pts[j];const dx=a.x-b.x,dy=a.y-b.y;const dist=Math.hypot(dx,dy);if(dist<MAX){const alpha=1-(dist/MAX);ctx.strokeStyle=`rgba(11,70,140,${alpha*.35})`;ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);ctx.stroke();}}for(const p of pts){ctx.fillStyle='rgba(11,70,140,.5)';ctx.beginPath();ctx.arc(p.x,p.y,2,0,Math.PI*2);ctx.fill();p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>w)p.vx*=-1;if(p.y<0||p.y>h)p.vy*=-1;}requestAnimationFrame(D);}window.addEventListener('resize',R);R();D();})();
const form=document.querySelector('form[data-contact]');form?.addEventListener('submit',async e=>{e.preventDefault();const btn=form.querySelector('button[type="submit"]');const status=form.querySelector('[data-status]');btn.disabled=true;status.textContent="Sending...";const payload=Object.fromEntries(new FormData(form).entries());try{await new Promise(r=>setTimeout(r,900));status.textContent="Thanks! Weâ€™ll get back to you shortly.";status.classList.add('badge');form.reset();}catch(err){status.textContent="Something went wrong. Please email hello@onbrd.solutions";status.style.color='var(--danger)';}finally{btn.disabled=false;}});
